<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<!--*** This is a generated file.  Do not edit.  ***-->
<link rel="stylesheet" href="skin/tigris.css" type="text/css">
<link rel="stylesheet" href="skin/mysite.css" type="text/css">
<link rel="stylesheet" href="skin/site.css" type="text/css">
<link media="print" rel="stylesheet" href="skin/print.css" type="text/css">
<title>Avalon Framework - The Component Lifecycle</title>
</head>
<body bgcolor="white" class="composite">
<!--================= start Banner ==================-->
<div id="banner">
<table width="100%" cellpadding="8" cellspacing="0" summary="banner" border="0">
<tbody>
<tr>
<!--================= start Group Logo ==================-->
<td align="left">
<div class="groupLogo">
<a href="http://www.apache.org/"><img border="0" class="logoImage" alt="Apache" src="images/group-logo.gif"></a>
</div>
</td>
<!--================= end Group Logo ==================-->
<!--================= start Project Logo ==================--><td align="right">
<div class="projectLogo">
<a href="http://avalon.apache.org/"><img border="0" class="logoImage" alt="Apache Avalon" src="images/project-logo.gif"></a>
</div>
</td>
<!--================= end Project Logo ==================-->
</tr>
</tbody>
</table>
</div>
<!--================= end Banner ==================-->
<!--================= start Main ==================-->
<table width="100%" cellpadding="0" cellspacing="0" border="0" summary="nav" id="breadcrumbs">
<tbody>
<!--================= start Status ==================-->
<tr class="status">
<td>
<!--================= start BreadCrumb ==================--><a href=""></a><a href=""></a><a href=""></a>
<!--================= end BreadCrumb ==================--></td><td id="tabs">
<!--================= start Tabs ==================-->
<div class="tab">
<span class="unselectedTab"><a href="http://avalon.apache.org/">Avalon Home</a></span> | <span class="selectedTab"><a href="index.html"><font color="#000000">Framework</font></a></span> | <span class="unselectedTab"><a href="http://avalon.apache.org/components/">Components</a></span> | <span class="unselectedTab"><a href="http://avalon.apache.org/phoenix/">Phoenix</a></span> | <span class="unselectedTab"><a href="http://avalon.apache.org/seca/">SECA</a></span> | <span class="unselectedTab"><a href="http://avalon.apache.org/apps/">Apps</a></span>
</div>
<!--================= end Tabs ==================-->
</td>
</tr>
</tbody>
</table>
<!--================= end Status ==================-->
<table id="main" width="100%" cellpadding="8" cellspacing="0" summary="" border="0">
<tbody>
<tr valign="top">
<!--================= start Menu ==================-->
<td id="leftcol">
<div id="navcolumn">
<div class="menuBar">
<div class="menu">
<span class="menuLabel">Essentials</span>
        
<div class="menuItem">
<a href="index.html">Overview</a>
</div>
        
<div class="menuItem">
<a href="getting-started.html">Getting Started</a>
</div>
        
<div class="menuItem">
<a href="http://avalon.apache.org/bindownload.cgi">Download</a>
</div>
    
</div>
<div class="menu">
<span class="menuLabel">Guide</span>
        
<div class="menuItem">
<a href="guide-oop-best-practices.html">OOP best Practices</a>
</div>
        
<div class="menuItem">
<a href="guide-patterns-what-are.html">What are Patterns?</a>
</div>
        
<div class="menuItem">
<a href="guide-patterns-in-avalon.html">Patterns in Avalon</a>
</div>
        
<div class="menuItem">
<a href="guide-cop-what-is.html">What is COP?</a>
</div>
        
<div class="menuItem">
<a href="guide-cop-in-avalon.html">COP in Avalon</a>
</div>
        
<div class="menuItem">
<a href="guide-where-to-go-from-here.html">Where to Go from here</a>
</div>
    
</div>
<div class="menu">
<span class="menuLabel">Reference</span>
        
<div class="menuItem">
<a href="changes.html">Changes</a>
</div>
        
<div class="menuItem">
<a href="http://avalon.apache.org/framework/api/index.html">API Docs</a>
</div>
        
<div class="menuItem">
<span class="menuSelected">The Lifecycle</span>
</div>
        
<div class="menuItem">
<a href="reference-containers.html">Containers</a>
</div>
    
</div>
</div>
</div>
</td>
<!--================= end Menu ==================-->
<!--================= start Content ==================--><td>
<div id="bodycol">
<div class="app">
<div align="center">
<h1>Avalon Framework - The Component Lifecycle</h1>
</div>
<div class="h3">
  
  
    
<div class="h3">
<h3>Introduction</h3>
</div>

      
<p>
        A component lives within something called a container. The contract between a 
        container and a contained component is simple: the container is required to 
        take a component through what is called its <strong>lifecycle</strong>.
      </p>
      
<p>
        The Avalon project provides an
        application that functions as a container for componentized applications 
        called <a href="http://avalon.apache.org/phoenix/index.html">Phoenix</a>.  This is not 
        exclusive, components adhering to lifecycle interfaces, can be mounted in 
        custom containers.  Cocoon and others mounts their own containers for 
        components and invoke relevant methods from the lifecycle interfaces.  See
        <a href="reference-containers.html">Containers</a>.
      </p>
      
<p>
        The lifecyle methods from the Avalon Framework sub-project are designed to be
        used by just about any component hosted by any container.  Of course, the API
        in question may well require additional interfaces for strongly typed 
        functionality, but these interfaces should negate the need for any duplication
        of effort.
      </p>
    
    
<div class="h3">
<h3>The Lifecycle</h3>
</div>

      
<p>
        The lifecycle of a component specifies the methods that can be called on it,
        and the order in which this may happen. Some methods can be called only once
        in a specific <span class="codefrag">phase</span> of a component's lifecycle, others may
        be called multiple times. These methods are called the lifecycle methods.
      </p>
      
<p>
        It is up to each container to indicate which lifecycle methods it will honor.
        This should be clearly documented together with the description of the
        container. A sister project to Phoenix supports all of the lifecycle methods defined in the
        Avalon Framework API.
      </p>
    
    
<div class="h3">
<h3>The Lifecycle Interfaces</h3>
</div>

      
<p>
        A component exposes its lifecycle methods by implementing the lifecycle
        interfaces. Each of these defines one or more methods that represent a
        specific phase in a component's lifecycle. The defined interfaces are:
      </p>
      
<ol>
        
<li>LogEnabled</li>
        
<li>Contextualizable</li>
        
<li>Serviceable (replacement for Composable)</li>
        
<li>Configurable</li>
        
<li>Parameterizable</li>
        
<li>Initializable</li>
        
<li>Startable</li>
        
<li>Suspendable</li>
        
<li>Recontextualizable</li>
        
<li>Recomposable</li>
        
<li>Reconfigurable</li>
        
<li>Reparameterizable</li>
        
<li>Stoppable</li>
        
<li>Disposable</li>
      
</ol>
      
<div class="frame note">
<div class="label">Note</div>
<div class="content">
        
<strong>Note:</strong>java.lang.Runnable has also been in use as a lifecycle
        interface. This is not recommended and is not supported by Avalon. Instead,
        the run() method is the responsibility of the component itself. If you wish
        to use it, call it from within start() or another method.  
      </div>
</div>
    
    
<div class="h3">
<h3>Phase Order</h3>
</div>

      
<p>
        The order in which the various lifecycle methods are called is very specific.
        While none are required (it is possible to have a component implementing
        none of the lifecycle methods, although the use of that would be limited),
        some can only be used when others are as well. This is best explained using
        a few examples.
      </p>
      
<div class="h4">
<h4>Simple Examples</h4>
</div>

        
<p>The lifecycle of a component implementing only Configurable for
        example will be:</p>
        
<ol>
          
<li>constructor</li>
          
<li>configure</li>
          
<li>finalize</li>
        
</ol>
        
<p>The lifecycle of a component implementing only Serviceable will be:</p>
        
<ol>
          
<li>constructor</li>
          
<li>service</li>
          
<li>finalize</li>
        
</ol>
      
      
<div class="h4">
<h4>Complete</h4>
</div>

        
<p>
          If a component implements more than one interface the order of
          the events (service, configure etc.) follow a specific order. A component
          implementing all above interfaces (including Runnable) will follow these
          specific paths.
        </p>
        
<p>
          Startup Phase:
        </p>
        
<ol>
          
<li>constructor <strong>as a consequence of instantiation</strong>

</li>
          
<li>contextualize</li>
          
<li>service or compose</li>
          
<li>configure</li>
          
<li>parameterize</li>
          
<li>initialize</li>
          
<li>start</li>
        
</ol>
        
<p>
          At various or repeated times after startup:
        </p>
        
<ol>
          
<li>suspend</li>
          
<li>recontextualize</li>
          
<li>recompose</li>
          
<li>reconfigure</li>
          
<li>reparameterize</li>
          
<li>resume</li>
        
</ol>
        
<p>
          Shutdown Phase:
        </p>
        
<ol>
          
<li>stop</li>
          
<li>dispose</li>
          
<li>finalize <strong>at some indeterminate moment by the garbage collector</strong>

</li>
        
</ol>
      
      
<div class="h4">
<h4>Phases executed once</h4>
</div>

        
<p>
          These lifecycle methods are only called once in the entire life of a
          component:
        </p>
        
<ul>
          
<li>contextualize</li>
          
<li>service</li>
          
<li>configure</li>
          
<li>parameterize</li>
          
<li>initialize</li>
          
<li>dispose</li>
        
</ul>
      
      
<div class="h4">
<h4>Phases executed once or more</h4>
</div>

        
<p>
          These lifecycle methods are called at least once and possibly more, depending
          on the container:
        </p>
        
<ul>
          
<li>start</li>
          
<li>stop</li>
        
</ul>
      
      
<div class="h4">
<h4>The Suspendable Interface</h4>
</div>

        
<p>
          The methods suspend() and resume() are not guaranteed to be called at all,
          even when implemented. They can be called more than once, but only after
          one another and between start() and stop(). The reason they exist is so 
          the container can notify the component it needs to temporarily stop 
          any operations. The container may need to perform some synchronized operation 
          on one of the components used by this component, or it may wish to call any 
          of the following methods, which can also be called zero or more times, and 
          only between a suspend() and a resume().
        </p>
        
<ul>
          
<li>recontextualize()</li>
          
<li>recompose()</li>
          
<li>reconfigure()</li>
          
<li>reparameterize()</li>
        
</ul>
      
    
  

<div id="authors" align="right">by&nbsp;Berin Loritsch,&nbsp;Peter Donald,&nbsp;Leo Simons</div>
</div>
</div>
</div>
</td>
<!--================= end Content ==================-->
</tr>
</tbody>
</table>
<!--================= end Main ==================-->
<!--================= start Footer ==================-->
<div id="footer">
<table summary="footer" cellspacing="0" cellpadding="4" width="100%" border="0">
<tbody>
<tr>
<!--================= start Copyright ==================-->
<td colspan="2">
<div align="center">
<div class="copyright">
              Copyright &copy; 2003&nbsp;The Apache Software Foundation.. All rights reserved.
            </div>
</div>
</td>
<!--================= end Copyright ==================-->
</tr>
<tr>
<td align="left">
<!--================= start Host ==================-->
<!--================= end Host ==================--></td><td align="right">
<!--================= start Credits ==================-->
<div align="right">
<div class="credit"></div>
</div>
<!--================= end Credits ==================-->
</td>
</tr>
</tbody>
</table>
</div>
<!--================= end Footer ==================-->
</body>
</html>
